<!-- Мини-приложение Telegram для управления задачами. Использует API бота. -->
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Task Mini App</title>
</head>
<body>
<h3>Задачи</h3>
<ul id="tasks"></ul>
<input id="newTask" placeholder="Новая задача"/>
<button onclick="addTask()">Создать</button>
<script>
const params = new URLSearchParams(location.search);
const token = params.get('token') || '';
async function loadTasks() {
  const r = await fetch('/tasks', { headers: { Authorization: token } });
  document.getElementById('tasks').innerHTML = (await r.json()).map(t => `<li>${t.task_description} — ${t.status}</li>`).join('');
}
async function addTask() {
  const description = document.getElementById('newTask').value;
  await fetch('/tasks', { method: 'POST', headers: { 'Content-Type': 'application/json', Authorization: token }, body: JSON.stringify({ description }) });
  loadTasks();
}
loadTasks();
</script>
</body>
</html>

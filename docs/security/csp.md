<!-- Назначение файла: как расширить Content Security Policy при добавлении доменов. -->

# Content Security Policy

CSP защищает приложение от поддельных ресурсов. По умолчанию включён режим
`report-only`, чтобы собрать отчёты о нарушениях и не ломать Mini App.
В строгом режиме добавляется директива `upgrade-insecure-requests`,
переводящая все HTTP-запросы на HTTPS. Для получения отчётов задайте
переменную `CSP_REPORT_URI` с адресом приёма сообщений.

## Расширение белого списка

1. Добавьте домен в нужную переменную окружения `.env`:
   - `CSP_CONNECT_SRC_ALLOWLIST`
   - `CSP_IMG_SRC_ALLOWLIST`
   - `CSP_SCRIPT_SRC_ALLOWLIST`
   - `CSP_STYLE_SRC_ALLOWLIST`
     Значения разделяйте пробелом или запятой.
2. Перезапустите сервер.
3. После 48 часов и анализа отчётов установите `CSP_REPORT_ONLY=false`
   для включения строгого режима.
